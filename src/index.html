<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>TO-DO OR NOT TO-DO</title>
   </head>
   <body>
      <nav id="sidebar">
         <ul>
            <li>
               <span class="logo">zeddycodes</span>
               <button id="toggle-btn">
                  <img
                     src="./images/menu_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg" />
               </button>
            </li>
            <li class="active">
               <a href="index.html">
                  <img
                     src="./images/today_24dp_E3E3E3_FILL1_wght400_GRAD0_opsz24.svg" />
                  <span>Today</span>
               </a>
            </li>
            <li>
               <a href="dashboard.html">
                  <img
                     src="./images/event_upcoming_24dp_E3E3E3_FILL1_wght400_GRAD0_opsz24.svg" />
                  <span>This Week</span>
               </a>
            </li>
            <li>
               <a href="calender.html">
                  <img
                     src="./images/calendar_month_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg" />
                  <span>Upcoming</span>
               </a>
            </li>
            <li>
               <a href="profile.html">
                  <img
                     src="./images/checklist_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg" />
                  <span>Completed</span>
               </a>
            </li>
            <li>
               <button id="open-project" class="dropdown-btn">
                  <img
                     src="./images/add_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg" />
                  <span>Add Project</span>
               </button>
               <div class="dialog-content close">
                  <form>
                     <input type="text" id="title" required />
                  </form>
                  <div class="proj-btn">
                     <button class="cancel cancel-project">Cancel</button>
                     <button class="addProject add">Add Project</button>
                  </div>
               </div>
               <ul class="project-container"></ul>
            </li>
         </ul>
      </nav>

      <main>
         <div class="todo-container">
            <h2>Hello World</h2>
            <p>
               Lorem ipsum dolor, sit amet consectetur adipisicing elit. Labore,
               sed, vitae minima reprehenderit illum, quo id architecto eum
               saepe dolores aspernatur inventore porro earum dolorum facilis
               quas sapiente nemo ipsa?
            </p>
         </div>
      </main>
      <div id="content"></div>
      <!-- <script src="./script.js">
                  import createProject from "./project.js";
         import createTodo from "./todo.js";

         const TodoManager = (function () {
           let projectList = [];
           const STORAGE_KEY = "todoProjects";

           const saveToStorage = () => {
             const dataToSave = projectList.map(project => project.toJSON());
             localStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
           };

           const rehydrateProject = (parsedProject) => {
             const rehydratedTodos = parsedProject.todos.map(parsedTodo =>
               createTodo(
                 parsedTodo.title,
                 parsedTodo.description,
                 parsedTodo.dueDate,
                 parsedTodo.priority,
                 parsedTodo.isComplete,
                 saveToStorage
               )
             );
             return createProject(
               parsedProject.title,
               rehydratedTodos
             );
           };

           const loadFromStorage = () => {
             try {
               const storedData = localStorage.getItem(STORAGE_KEY);
               if (storedData) {
                 const parsedData = JSON.parse(storedData);
                 if (parsedData) {
                   projectList = parsedData.map(rehydrateProject);
                 }
               }
             } catch (e) {
               console.error("Error loading from local storage:", e);
             }
           };

           const addProject = (title) => {
             const newProject = createProject(title, []);
             projectList.push(newProject);
             saveToStorage();
             return newProject;
           };

           const getProjects = () => projectList;

           // Added method to add a todo, now decoupled from factories
           const addTodoToProject = (projectIndex, title, description, dueDate, priority) => {
             const project = projectList[projectIndex];
             if (project) {
               const newTodo = createTodo(title, description, dueDate, priority);
               project.addNewTodo(newTodo);
               saveToStorage();
             }
           };

           // New: Method to populate the default project with todos
           const populateDefaultProject = (defaultProject) => {
             const sampleTodos = [
               {
                 title: "Build the UI",
                 description: "Implement the DOM manipulation to render projects and todos.",
                 dueDate: "2025-10-17",
                 priority: "High"
               },
               {
                 title: "Test localStorage",
                 description: "Add some test data and verify that it persists after a page refresh.",
                 dueDate: "2025-10-18",
                 priority: "Medium"
               }
             ];

             sampleTodos.forEach(todoData => {
               const newTodo = createTodo(
                 todoData.title,
                 todoData.description,
                 todoData.dueDate,
                 todoData.priority
               );
               defaultProject.addNewTodo(newTodo);
             });

             saveToStorage();
           };

           (function init() {
             loadFromStorage();
             if (projectList.length === 0) {
               const defaultProject = addProject("Default");
               populateDefaultProject(defaultProject);
             }
           })();

           return { addProject, getProjects, addTodoToProject };
         })();

         export default TodoManager;
      </script> -->
   </body>
</html>
